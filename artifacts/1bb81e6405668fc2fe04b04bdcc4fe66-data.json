{"0000:1": "### @export \"requires\"\n%w(rubygems sinatra tropo-webapi-ruby awesome_print).each{|lib| require lib}\n\n### @export \"environment\"\nenable :sessions\n\n### @export \"root\"\npost '/' do\n     tropo_session = Tropo::Generator.parse(request.env[\"rack.input\"].read)\n     session['message_to_play'] = tropo_session['session']['parameters']['message']\n     ap tropo_session          # LOG TO CONSOLE\n          tropo = Tropo::Generator.new do\n            on :event => 'hangup', :next => '/hangup.json'\n            on :event => 'continue', :next => '/speak.json'\n          call(:to=>\"tel:+1\" + tropo_session['session']['parameters']['number_to_dial'],:from => '4078350065')            \n          end\n  tropo.response\nend\n\n### @export \"speak\"\npost '/speak.json' do\n  msg = session['message_to_play']\n  ap Tropo::Generator.parse(request.env[\"rack.input\"].read)\n  tropo = Tropo::Generator.new do\n    on :event => 'hangup', :next => '/hangup.json'   \n    say msg\n  end\n  tropo.response\nend\n\n### @export \"hangup\"\npost '/hangup.json' do\n  json_string = request.env[\"rack.input\"].read\n  tropo_session = Tropo::Generator.parse json_string\n  ap tropo_session\nend\n\n"}